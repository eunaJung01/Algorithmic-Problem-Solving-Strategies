# 3. 코딩과 디버깅에 관하여

<br/>

## 3.1 도입: 코딩의 중요성을 간과하지 말라

> 당장 빨리 코드를 작성하는 것 <<< 읽기 쉬운 코드를 작성하는 것

<br/>
<br/>

## 3.2 좋은 코드를 짜기 위한 원칙

### 적극적으로 코드 재사용하기

같은 코드가 반복된다면 이들을 함수나 클래스로 분리해 재사용한다. (= `모듈화`)

<br/>

긴박하게 코드를 작성하다 보면 이렇게 코드를 개선할 여유를 만들기 힘든 것은 사실이나, 시간이 없다고 해서 코드를 더 알기 쉽게 고치는 데 주저해서는 안된다.

당장은 차이점이 없더라도 항상 코드를 깔끔하게 작성하고 유지하는 데 신경을 쓰다 보면 스스로가 그와 같은 코드에 익숙해지기 때문이다.

→ 버그가 생겼을 때 간결한 코드가 디버깅 시간에 엄청난 차이를 가져다 준다.

<br/>

### 표준 라이브러리 공부하기

시간 제한이 있는 프로그래밍 대회에서 모든 코드를 직접 작성하는 것은 대표적인 시간 낭비의 하나이다.

`표준 라이브러리`는 셀 수 없을 정도로 많이 사용되고 검증되었기 때문에, 메모리 관리나 정당성 증명에 신경 쓸 필요 없이 편하게 사용할 수 있다.

작성한 코드를 타인이 이해하기도 쉬워진다.

<br/>

### 항상 같은 형태로 프로그램을 작성하기

같은 코드를 작성하는 더 좋은 방법에 대해 꾸준히 고민할 필요는 있지만,  
자주 작성하는 알고리즘이나 코드 등에 대해서는 한 번 검증된 코드를 작성하고 이것만을 꾸준히 사용할 필요가 있다.

<br/>

### 모든 자료를 정규화해서 저장하기

같은 자료를 두 가지 형태로 저장하지 않는다.

예를 들어, 외부에서 문자열을 읽어들이자마자 가능한 한 UTF-16이나 UTF-8 인코딩으로 변환해야만 문자열을 다루기 훨씬 편해진다.

<br/>
<br/>

## 3.3 자주 하는 실수

### 배열 범위 밖 원소에 접근

이 실수를 예방하는 가장 좋은 방법은 (당연하게도.) 배열 크기를 정할 때 계산을 신중히 하는 것이다.

그리고 0으로 시작하는 범위와 1을 시작으로 하는 범위를 혼동하는 것에서 버그가 많이 발생하므로 주의해야 한다.

<br/>

### 일관되지 않은 범위 표현 방식 사용하기

대부분의 프로그래밍 언어는 `닫힌 구간(closed interval)`과 `열린 구간(open interval)` 둘 사이의 절충안인 `반 열린 구간(half-open interval)`을 사용한다.

반 열린 구간은 첫 번째 값은 집합 안에 포함하고, 다른 하나는 집합 안에 포함하지 않는다.

<br/>

C++ `STL`에서는 반복자로 범위를 표현할 때 첫 원소를 가르키는 반복자와 마지막 원소 다음 위치를 가리키는 반복자를 사용한다.

- `begin()` : 첫 번째 원소를 가리킨다.
- `end()` : 마지막 원소가 아닌, 마지막 원소 다음에 있는 가상의 원소를 가리킨다.

<br/>

이는 자연어에서 사용하는 범위와 다르다는 이유 때문에 문제가 생기는 경우가 종종 있다.

이 문제를 피하기 위해서는 프로그램 내에서 한 가지 방법으로만 범위를 표현할 필요가 있고, 프로그래밍 언어가 지원하는 범위 표현 방식을 따르는 것이 가장 효율적이다.

<br/>

### Off-by-one 오류

Off-by-one 오류는 계산의 큰 줄기는 맞지만 하나가 모자라거나 하나가 많아서 틀리는 코드의 오류들을 모두 가리킨다.

이런 오류를 방지할 수 있는 좋은 방법은 최소 입력이 주어졌을 때 이 코드가 어떻게 동작하는지를 되새겨 보면서 프로그램을 짜는 것이다.

<br/>

### 컴파일러가 잡아주지 못하는 상수 오타

e.g., 64비트 정수형에 들어갈 상수를 쓰면서 해당 상수가 64비트라고 지정하지 않는 실수가 발생할 수 있다.

C++의 경우 정수형 상수 뒤에 `LL`을 붙이지 않으면 해당 상수는 32비트로 가정되므로, 자료형이 정확하다고 해도 오버플로가 발생할 수 있다.

<br/>

### 스택 오버플로

프로그램의 실행 중 콜 스택(call stack)이 오버플로해서 프로그램이 강제종료되는 오류이며, 이는 대개 재귀 호출의 깊이가 너무 깊어져서 온다.

대부분은 자동으로 힙에 메모리를 할당하는 `STL 컨테이너`를 사용하거나 `전역 변수`를 사용한다.

<br/>
<br/>

## 3.4 디버깅과 테스팅

### 디버깅 단계

1. 작은 입력에 대해 제대로 실행되나 확인한다.
2. `단정문(assertion)`을 쓴다.
    - 단정문 : 주어진 조건이 거짓일 때 오류를 내고 프로그램을 강제 종료시키는 함수 또는 구문
3. 프로그램의 계산 중간 결과를 출력한다.

<br/>

### 테스트에 관하여

예제 입력을 만들어 가능한 한 많이 프로그램을 테스트하는 것이 좋다.

주어진 예제 입력을 약간 바꿔서 넣어 보거나, 있을 수 있는 가장 작은 입력과 가장 큰 입력을 만들어서 넣어보고  
시간 안에 실행되는지, 답은 잘 나오는지 테스트해 보는 것이 좋다.
